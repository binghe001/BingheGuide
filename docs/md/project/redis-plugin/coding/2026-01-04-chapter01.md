---
title: 第01节：高性能Redis组件基础功能设计与实现
pay: https://articles.zsxq.com/id_6frjx0k7uj2j.html
---

# 《高性能Redis组件》落地实现-第01节：高性能Redis组件基础功能设计与实现

作者：冰河
<br/>星球：[http://m6z.cn/6aeFbs](http://m6z.cn/6aeFbs)
<br/>博客：[https://binghe.gitcode.host](https://binghe.gitcode.host)
<br/>文章汇总：[https://binghe.gitcode.host/md/all/all.html](https://binghe.gitcode.host/md/all/all.html)
<br/>源码获取地址：[https://t.zsxq.com/0dhvFs5oR](https://t.zsxq.com/0dhvFs5oR)

> 沉淀，成长，突破，帮助他人，成就自我。

* 本章难度：★☆☆☆☆
* 本章重点：对高性能Redis组件的基础功能进行设计和实现，主要包括：存储模型和类型转换器，以及高性能Redis组件的基础配置，从总体上理解高性能Redis组件基础功能的设计，并从全局视角了解高性能Redis组件的设计和架构思想，并能够将其灵活应用到自身实际项目中。

**大家好，我是冰河~~**

从本节开始正式进入高性能Redis组件的编码落地实现篇章。从编码实现中，我会带着大家一步步设计并开发避免缓存击穿、穿透和雪崩问题的代码。整体代码可直接应用于实际生产环境。

## 一、前言

截止到目前，我们已经明确了高性能Redis组件的需求和流程，对高性能Redis组件的方案目标、总体架构设计和落地方案进行了总体介绍。明确这些事项后，我们就可以进一步对高性能Redis组件的基础功能进行设计和开发。

## 二、本节诉求

对高性能Redis组件的基础功能进行设计和实现，主要包括：存储模型和类型转换器，以及高性能Redis组件的基础配置，从总体上理解高性能Redis组件基础功能的设计，并从全局视角了解高性能Redis组件的设计和架构思想，并能够将其灵活应用到自身实际项目中。

## 三、设计思路

高性能Redis组件的基础功能主要包括：数据存储模型、类型转换器和Redis基础配置。

**（1）数据存储模型**

数据存储模型就是高性能Redis组件中定义的与Redis进行数据交互和存储的基础数据模型。在基础数据模型中，会封装业务层传递的数据，并且会记录数据的过期时间点。

无论业务层的数据结构如何变化，当需要读写Redis时，在高性能Redis组件内部，都会将业务层的数据封装为高性能Redis组件的基础数据模型，然后访问Redis进行读写操作。

在高性能Redis组件中，数据存储到Redis中时，会将当前数据过期的时间点一同存储到Redis，并且设置超时时间。当读取Redis数据时，检测到数据为空时，会异步加锁重建缓存。

在重建缓存的过程中，首先会再次从Redis缓存读取数据，以免前面获取过锁的线程查询DB构建过缓存，后续等待锁的线程获取到锁再次查询DB构建缓存。在重建缓存时，除了判断数据是否为空查询DB构建缓存外，也会通过存储的数据过期时间点判断数据是否过期。

如果当前时间小于数据的过期时间，则说明数据未过期，不再执行重建缓存的逻辑。如果当前时间大于或者等于数据的过期时间，则说明数据已经过期，会查询DB后构建缓存数据。如果从DB中查询的数据为空，为了避免后续每次查询DB不存在的数据时，请求都会穿透到DB，此时，会根据查询的数据类型，例如查询的数据是单个值、对象还是数组或者列表，高性能Redis组件会向Redis存储对应的空值，避免引起缓存击穿、穿透和雪崩问题。

**（2）类型转换器**

在高性能Redis组件内部，根据方法传递的参数构建缓存的Key和对传递的业务数据进行处理时，都会根据类型转换器判断数据的类型，例如确定数据是简单类型还是复合类型，如果是简单类型，则会对相关的数据进行简单值处理。如果是复合类型，则进一步判断是否可转换成Json，如果可以转换成Json，则将其转换成Json处理。否则，当做简单字符串处理。

**（3）Redis基础配置**

Redis基础配置就是搭建Redis相关项目时必不可少的基础配置项和相关的配置类。

## 四、核心类设计

**注意：本节只给大家展示高性能Redis组件基础功能的核心类实现关系，其他代码的实现细节，大家可以自行到本节对应的源码分支进行查看，这里不再赘述。**

高性能Redis组件基础功能的核心类设计如图1-1所示。

<div align="center">
    <img src="https://binghe.gitcode.host/images/project/redis-plugin/2026-01-04-001.png?raw=true" width="70%">
    <br/>
</div>

可以看到，高性能Redis组件的基础功能主要由RedisData、TypeConversion、RedissonConfig和RedisPoolConfig类组成。

* RedisData：高性能Redis组件提供的基础数据模型。
* TypeConversion：类型转换器。
* RedissonConfig：Redisson相关的配置类。
* RedisPoolConfig：RedisTemplate相关的配置类。

## 五、编码实现

本节只给大家展示高性能Redis组件基础功能的核心类编码实现，其他代码的实现细节，大家可以自行到本节对应的源码分支进行查看，这里不再赘述。

## 查看完整文章

加入[冰河技术](https://public.zsxq.com/groups/48848484411888.html)知识星球，解锁完整技术文章、小册、视频与完整代码