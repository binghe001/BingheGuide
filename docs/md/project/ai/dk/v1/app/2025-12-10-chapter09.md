---
title: 第09节：基于MCP插件加入高德地图MCP Server
pay: https://articles.zsxq.com/id_i9vf0rzbncbc.html
---

# 《实战AI大模型》生成AI应用-第09节：基于MCP插件加入高德地图MCP Server

作者：冰河
<br/>星球：[http://m6z.cn/6aeFbs](http://m6z.cn/6aeFbs)
<br/>博客：[https://binghe.gitcode.host](https://binghe.gitcode.host)
<br/>文章汇总：[https://binghe.gitcode.host/md/all/all.html](https://binghe.gitcode.host/md/all/all.html)
<br/>源码获取地址：[https://t.zsxq.com/0dhvFs5oR](https://t.zsxq.com/0dhvFs5oR)

**大家好，我是冰河~~**

2025年3月，高德地图发布了官方的MCP服务，这为AI应用开发者提供了一个难得的机会。通过集成高德地图的MCP  Server，我们可以让大模型直接获取实时位置服务、路线规划、天气查询等12类核心地理数据。今天，冰河会带大家一步步在阿里云服务器上基于MCP插件加入高德地图MCP Server。

## 一、理解MCP协议的核心价值

很多开发者在尝试让大模型调用外部工具时，总会遇到各种兼容性问题。不同的模型、不同的工具接口，需要不同的适配方式，这种碎片化状况严重影响了开发效率。

MCP（模型上下文协议）的出现，就像为AI世界带来了“USB-C接口”。它是一个开放标准协议，由Anthropic公司在2024年11月提出，目标就是统一大模型与外部数据源、工具之间的交互方式。

通过MCP，我们可以让AI模型像插拔USB设备一样，轻松连接各种外部服务。无论是数据库系统、办公软件，还是像高德地图这样的地理信息服务，都能通过标准化协议接入，极大简化了AI智能体的开发难度。

## 二、关于高德地图MCP

高德地图这次开放的MCP服务确实令人印象深刻。它不仅提供了基础的地理编码和逆地理编码功能，还涵盖了全场景的地图服务能力。我仔细研究了他们的文档，发现主要包含以下12大核心接口：

- 地理编码（地址转坐标）
- 逆地理编码（坐标转地址）
- IP定位服务
- 实时天气查询
- 多种路径规划（驾车、公交、步行、骑行）
- 距离精准测量
- 多维度地点搜索（关键词、周边、详情）

## 三、准备工作

在开始技术实现之前，我们需要做好三项基础准备。

### 3.1 获取高德地图API Key

首先访问高德开放平台（https://lbs.amap.com），注册并登录后：

- 进入控制台的应用管理页面
- 创建新应用（类型选择“Web服务”）
- 记录下生成的API Key，后续配置会用到

### 3.2 准备云服务器环境

我选择了阿里云的轻量应用服务器，配置建议：

- CPU：2核
- 内存：4GB
- 系统：Ubuntu 20.04
- 开放端口：80、443、3000、8000

### 3.3 配置MCP连接信息

将获取的API Key填入以下配置模板：

源码详见：deepseek-case-09/mcpServers.json

```json
{
  "mcpServers": {
    "amap-amap-sse": {
      "url": "https://mcp.amap.com/sse?key=你的高德地图API_Key"
    }
  }
}
```

## 四、部署Dify平台

虽然有些读者可能已经部署过Dify，但为了流程的完整性，我们在这里还是简要说明关键步骤。

### 4.1 安装基础环境

源码详见：deepseek-case-09/install_base.sh

```bash
# 更新系统
apt update && apt upgrade -y

# 安装Docker
curl -fsSL https://get.docker.com | bash

# 安装Docker Compose
curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose

# 启动Docker服务
systemctl start docker
systemctl enable docker
```

### 4.2 部署Dify服务

源码详见：deepseek-case-09/install.dify.sh

```bash
# 获取Dify源码
git clone https://github.com/langgenius/dify.git
cd dify/docker

# 配置文件准备
cp .env.example .env
# 编辑环境配置
vim .env  
```

### 4.3 关键配置项说明

在.env文件中，有几个配置需要特别注意：

源码详见：deepseek-case-09/env_config.sh

## 查看完整文章

加入[冰河技术](https://public.zsxq.com/groups/48848484411888.html)知识星球，解锁完整技术文章、小册、视频与完整代码